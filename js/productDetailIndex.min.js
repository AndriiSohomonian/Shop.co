import{d as P,s as q,a as _,B as T,t as x,c as f,u as v}from"./app.min.js";import"./rating.min.js";import"./quantity.min.js";function I(){const a=document.querySelectorAll("[data-fls-showmore]");let t,s;a.length&&(t=Array.from(a).filter(function(e,i,o){return!e.dataset.flsShowmoreMedia}),t.length&&c(t),document.addEventListener("click",p),window.addEventListener("resize",p),s=P(a,"showmoreMedia"),s&&s.length&&(s.forEach(e=>{e.matchMedia.addEventListener("change",function(){c(e.itemsArray,e.matchMedia)})}),n(s)));function n(e){e.forEach(i=>{c(i.itemsArray,i.matchMedia)})}function c(e,i){e.forEach(o=>{h(o,i)})}function h(e,i=!1){e=i?e.item:e;let o=e.querySelectorAll("[data-fls-showmore-content]"),u=e.querySelectorAll("[data-fls-showmore-button]");o=Array.from(o).filter(l=>l.closest("[data-fls-showmore]")===e)[0],u=Array.from(u).filter(l=>l.closest("[data-fls-showmore]")===e)[0];const r=g(e,o);i.matches||!i?r<d(o)?(q(o,0,e.classList.contains("--showmore-active")?d(o):r),u.hidden=!1):(_(o,0,r),u.hidden=!0):(_(o,0,r),u.hidden=!0)}function g(e,i){let o=0;const u=e.dataset.flsShowmore?e.dataset.flsShowmore:"size",r=parseFloat(getComputedStyle(i).rowGap)?parseFloat(getComputedStyle(i).rowGap):0;if(u==="items"){const l=i.dataset.flsShowmoreContent?i.dataset.flsShowmoreContent:3,y=i.children;for(let m=1;m<y.length;m++){const S=y[m-1],C=parseFloat(getComputedStyle(S).marginTop)?parseFloat(getComputedStyle(S).marginTop):0,E=parseFloat(getComputedStyle(S).marginBottom)?parseFloat(getComputedStyle(S).marginBottom):0;if(o+=S.offsetHeight+C,m==l)break;o+=E}r&&(o+=(l-1)*r)}else o=i.dataset.flsShowmoreContent?i.dataset.flsShowmoreContent:150;return o}function d(e){let i,o=e.offsetHeight;e.style.removeProperty("height"),e.closest("[hidden]")&&(i=e.closest("[hidden]"),i.hidden=!1);let u=e.offsetHeight;return i&&(i.hidden=!0),e.style.height=`${o}px`,u}function p(e){const i=e.target,o=e.type;if(o==="click"){if(i.closest("[data-fls-showmore-button]")){const r=i.closest("[data-fls-showmore-button]").closest("[data-fls-showmore]"),l=r.querySelector("[data-fls-showmore-content]"),y=r.dataset.flsShowmoreButton?r.dataset.flsShowmoreButton:"500",m=g(r,l);l.classList.contains("--slide")||(r.classList.contains("--showmore-active")?q(l,y,m):_(l,y,m),r.classList.toggle("--showmore-active"))}}else o==="resize"&&(t&&t.length&&c(t),s&&s.length&&n(s))}}window.addEventListener("load",I);const w=JSON.parse(sessionStorage.getItem("selectedProduct"));class A{constructor(t){this.title=t.title,this.image=t.image,this.price=t.price,this.rating=t.rating,this.description=t.description;const s=document.querySelector(".detail__address-span");s.textContent=this.title}setTitle(){const t=document.querySelector(".detail__title");t.textContent=this.title}setImage(){document.querySelectorAll(".currentImage").forEach(s=>{s.src=this.image})}setPrice(){const t=document.querySelector(".cards__price");if(this.price.sale===0)t.textContent="$"+this.price.startPrice;else{t.textContent="$"+Math.ceil(this.price.startPrice-this.price.startPrice*this.price.sale/100);const s=f("span","cards__prics-discount");s.textContent="$"+this.price.startPrice;const n=f("span");n.textContent="-"+this.price.sale+"%",s.append(n),t.append(s)}}setRating(){const t=document.querySelector(".cards__rating"),s=f("div","rating-stars"),n=Math.floor(this.rating),c=this.rating%1>=.5?1:0,h=5-n-c;for(let d=0;d<n;d++){const p=f("span","--icon-fullStar");s.append(p)}if(c){const d=f("span","--icon-halfStar");s.append(d)}for(let d=0;d<h;d++){const p=f("span","");s.append(p)}t.append(s);const g=document.querySelector(".rating-didgital");g.textContent=this.rating+"/5",t.append(g)}setDescription(){const t=document.querySelector(".detail__about");t.textContent=this.description}setPage(){this.setTitle(),this.setImage(),this.setPrice(),this.setRating(),this.setDescription()}}new A(w).setPage();const H=new T(x,"also-like__content","preview");H.result();function L(a){const t=JSON.parse(localStorage.getItem("cart"))||[],s=`${a.title}_${a.color}_${a.size}`;let n=t.find(h=>`${h.title}_${h.color}_${h.size}`===s);n?n.quantity+=a.quantity:t.push(a),localStorage.setItem("cart",JSON.stringify(t)),typeof updateCartSummary=="function"&&updateCartSummary(t),typeof v=="function"&&v();const c=document.getElementById("empty-cart-message");c&&c.remove()}function z(){const a=document.querySelector('.detail__color input[type="radio"]:checked'),t=a?a.value:null,s=document.querySelector('.detail__prise input[type="radio"]:checked'),n=s?s.value:null,c=document.querySelector("[data-fls-quantity-value]"),h=c?c.value:1;return{color:t,size:n,quantity:h}}function $(){const a=document.querySelector(".detail__button");a&&a.addEventListener("click",()=>{const t=z(),s={id:w.id,title:w.title,price:w.price,image:w.image,color:t.color,size:t.size,quantity:Number(t.quantity)};L(s);const n=document.getElementById("cart-success-toast");n.classList.add("show"),setTimeout(()=>{n.classList.remove("show")},1500)})}$();
